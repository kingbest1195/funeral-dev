### **Инструкция по внедрению модуля "Квиз-калькулятор"**

#### **1. Общая концепция и цель**

**Цель:** Создать пошаговый квиз-калькулятор, который в простой и понятной форме соберет у пользователя базовую информацию для расчета стоимости похорон. Главная задача — **получение контактных данных** (имя и телефон) для последующей связи с менеджером. (на данный момент не подключаем обработчик форм и БД, только frontend)

**Пользовательский опыт:** Квиз должен быть максимально простым, без сложных вопросов и мелких деталей. Он должен вызывать доверие и вести пользователя за руку. Ориентируемся на аудиторию 45+, которая может быть не очень уверенным пользователем ПК.

[cite\_start]**Графический референс:** `@/docs/features-modules/popup-quiz-calc/calc-ui-guide.png` [cite: 1] и сайт `master-granit161.ru`. Стиль должен быть легким, чистым, с крупными элементами управления.

---

#### **2. Логика и шаги квиза**

[cite\_start]Квиз будет состоять из 5 шагов, как указано в `docs/site-initial-data.md`[cite: 2, 3].

- **Шаг 1: Вид захоронения**
  - **Вопрос:** "Какой вид захоронения вы рассматриваете?"
  - **Варианты:** "Похороны" / "Кремация"
- **Шаг 2: Выбор гроба**
  - **Вопрос:** "Какой гроб вы предпочитаете?"
  - **Варианты:** "Эконом / Обитый тканью" / "Стандарт / Деревянный" / "Премиум / Лакированный"
- **Шаг 3: Выбор ритуальных принадлежностей**
  - **Вопрос:** "Какие принадлежности вам понадобятся?"
  - **Варианты (множественный выбор):** "Венок" / "Крест на могилу" / "Траурные ленты" / "Одежда для усопшего"
- **Шаг 4: Транспорт**
  - **Вопрос:** "Нужен ли транспорт для гостей?"
  - **Варианты:** "Да, автобус" / "Нет, не нужен"
- **Шаг 5: Получение расчета**
  - **Заголовок:** "Расчет почти готов\!"
  - [cite\_start]**Текст:** "Оставьте ваш номер телефона, и наш специалист свяжется с вами в течение 5 минут, чтобы озвучить точную стоимость и ответить на все вопросы." [cite: 2, 3]
  - **Поля:** "Ваше имя", "Ваш номер телефона"
  - **Кнопка:** "Получить точный расчет"

---

#### **3. Техническая реализация (для AI-агента)**

**Задача:** Создать новый React-компонент `<QuizCalculator>` и интегрировать его на главную страницу.

**3.1. Структура компонентов**

Создай следующие компоненты в `src/components/`:

- **`QuizCalculator/`**
  - **`QuizCalculator.jsx`:** Главный компонент, управляющий состоянием (текущий шаг, ответы пользователя).
  - **`QuizStep.jsx`:** Компонент для отображения одного шага. Принимает `props`: `title`, `children`.
  - **`QuizOption.jsx`:** Компонент для варианта ответа. Может быть кнопкой или чекбоксом. Принимает `props`: `label`, `type` (`single`/`multiple`), `isSelected`, `onClick`.
  - **`QuizProgress.jsx`:** Компонент для отображения прогресс-бара.
  - **`QuizCalculator.scss`:** Файл со стилями для всех компонентов квиза.

**3.2. Логика состояния в `QuizCalculator.jsx`**

Используй хуки React для управления состоянием:

```jsx
const [currentStep, setCurrentStep] = useState(1);
const [answers, setAnswers] = useState({});

// Функция для сохранения ответа и перехода к следующему шагу
const handleAnswerSelect = (question, answer) => {
  setAnswers((prev) => ({ ...prev, [question]: answer }));
  setCurrentStep((prev) => prev + 1);
};

// Функция для обработки отправки формы на последнем шаге
const handleSubmit = (formData) => {
  const finalData = { ...answers, ...formData };
  // Здесь будет логика отправки данных на сервер или email
  console.log(finalData);
};
```

**3.3. Появление/скрытие (Popup)**

Квиз должен появляться в модальном окне (попапе) поверх основного контента.

1.  **Триггер:**
    - Клик по кнопке "Перейти к расчету" в блоке "Калькулятор".
2.  **Реализация:** Используй готовое решение для модальных окон (например, `react-modal`) или создай кастомный компонент. Модальное окно должно иметь полупрозрачный темный фон и кнопку-крестик для закрытия.

---

#### **4. Графическое исполнение и стили**

[cite\_start]**Задача:** Стилизовать квиз в соответствии с `calc-example.jpg` [cite: 1] и общим UI-гайдом проекта.

**4.1. Общее окно квиза (`QuizCalculator.scss`)**

- **Фон:** Белый (`#FFFFFF`).
- **Форма:** Скругленные углы (`border-radius: $border-radius-lg;` из `variables.scss`).
- **Тень:** Легкая, рассеянная тень (`box-shadow: $box-shadow-card;`).
- **Расположение:** По центру экрана.

**4.2. Шапка квиза**

- **Заголовок:** "Рассчитайте стоимость похорон за 1 минуту". Шрифт `SangBleu Sunrise`, как у `<h2>`.
- **Прогресс-бар (`QuizProgress.jsx`):**
  - Светло-серая полоса (`#EAEAEA`).
  - Заполненная часть — акцентный золотой цвет (`$clr-accent`).
  - Подпись "Шаг X из 5" — мелкий серый текст.

**4.3. Содержимое шага (`QuizStep.jsx`)**

- **Вопрос:** Крупный, четкий текст. Шрифт `SangBleu Sunrise`, как у `<h3>`.
- **Варианты ответа (`QuizOption.jsx`):**
  - **Стиль:** Большие прямоугольные кнопки с легкой рамкой (`1px solid #EAEAEA`) и скругленными углами.
  - **Иконки:** Слева от текста добавить иконку, символизирующую вариант. Иконки должны быть в стиле "тонкая линия", акцентного золотого цвета.
    - **Промты для генерации иконок:**
      - `linear icon, minimalist, thin elegant lines, gold color #C49E5E, on a transparent background, 2D flat vector, a traditional coffin` (Похороны)
      - `... a funeral urn` (Кремация)
      - `... a simple wooden cross` (Крест на могилу)
      - `... a funeral wreath` (Венок)
  - **Состояние выбора:** При выборе вариант подсвечивается: рамка становится золотой, фон можно сделать чуть темнее. Для множественного выбора использовать чекбоксы.

**4.4. Навигация**

- Кнопка "Назад" слева внизу. Стиль — вторичная кнопка (прозрачная с золотой рамкой).
- Кнопка "Далее" справа внизу. Стиль — основная кнопка (золотая заливка). _Примечание: можно обойтись без кнопки "Далее", если выбор варианта автоматически переключает на следующий шаг._

**4.5. Последний шаг (Форма)**

- Стили для полей ввода (`<input>`) должны соответствовать общему UI-гайду (@/docs/ui-guide.md) (белый фон, серая рамка, золотая при фокусе).
- Кнопка "Получить точный расчет" должна быть большой, акцентной, в стиле основной кнопки.

Внедрив этот модуль, вы получите мощный инструмент для лидогенерации, который будет органично вписан в дизайн и удобен для вашей целевой аудитории.
