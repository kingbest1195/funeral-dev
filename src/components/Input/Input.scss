// =================
// INPUT - Переиспользуемый компонент поля ввода
// Использует переменные из variables.scss, следует принципам модульности
// =================

@use "@/styles/constants.scss" as *;
@use "@/styles/mixins.scss" as *;

.input {
  width: 100%;
  height: var(--input-height);
  padding: var(--spacing-4) var(--spacing-4);
  font-size: var(--font-size-base);
  font-family: var(--font-body);
  color: var(--color-text-primary);
  background-color: var(--color-bg-primary);
  border: var(--border-width-2) solid var(--color-border);
  border-radius: var(--border-radius-lg);
  outline: none;
  transition: all var(--duration-base) var(--ease-smooth);

  &::placeholder {
    color: var(--color-text-muted);
  }

  &:hover {
    border-color: var(--color-border-dark);
  }

  &:focus {
    border-color: var(--color-accent);
    box-shadow: var(--shadow-outline);
  }

  // Показываем ошибку только после взаимодействия пользователя
  // Используем data-атрибут для отслеживания touched состояния
  &:invalid[data-touched="true"] {
    border-color: var(--color-error);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: var(--color-bg-secondary);
  }

  // Стили для разных размеров
  &--small {
    height: calc(var(--input-height) - var(--spacing-2));
    padding: var(--spacing-2) var(--spacing-3);
    font-size: var(--font-size-sm);
  }

  &--large {
    height: calc(var(--input-height) + var(--spacing-2));
    padding: var(--spacing-5) var(--spacing-5);
    font-size: var(--font-size-lg);
  }

  // Стили для состояния ошибки
  &--error {
    border-color: var(--color-error);
    
    &:focus {
      border-color: var(--color-error);
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
  }

  // Стили для состояния успеха
  &--success {
    border-color: var(--color-success, #10b981);
    
    &:focus {
      border-color: var(--color-success, #10b981);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
  }
}

// Адаптивность
@include md-down {
  .input {
    padding: var(--spacing-3) var(--spacing-4);
    
    &--small {
      padding: var(--spacing-2) var(--spacing-3);
    }
    
    &--large {
      padding: var(--spacing-4) var(--spacing-5);
    }
  }
}